import{c as n,j as e,C as c,v as d,w as i,y as m,x as o,s as x}from"./index-COc_9EsS.js";import{u as p}from"./useQuery-08ZbY9E2.js";import{B as a}from"./badge-jxMiL_t9.js";import{M as h}from"./mail-C1qg-MLr.js";import{P as u}from"./phone-BZMpqAbR.js";import{B as j}from"./building-2-9KbUser1.js";import{C as g}from"./circle-alert-1_djnEYX.js";import{k as f}from"./format-B7SmLoOI.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y=n("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),N=r=>{switch(r){case"high":return"bg-red-100 text-red-800";case"medium":return"bg-yellow-100 text-yellow-800";case"low":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},v=r=>{switch(r){case"pending":return"bg-yellow-100 text-yellow-800";case"in_progress":return"bg-blue-100 text-blue-800";case"resolved":return"bg-green-100 text-green-800";case"closed":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},P=()=>{const{data:r,isLoading:l}=p({queryKey:["support-tickets"],queryFn:async()=>{const{data:s,error:t}=await x.from("support_tickets").select("*").order("created_at",{ascending:!1});if(t)throw t;return s}});return l?e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"loader"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(y,{className:"h-8 w-8"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Support Tickets"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage customer support requests"})]})]}),e.jsx("div",{className:"grid gap-4",children:r==null?void 0:r.map(s=>e.jsxs(c,{children:[e.jsx(d,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs(i,{className:"flex items-center gap-2",children:[s.name,e.jsx(a,{className:v(s.status),children:s.status}),e.jsx(a,{className:N(s.priority),children:s.priority})]}),e.jsxs(m,{className:"flex items-center gap-4 mt-2",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(h,{className:"h-4 w-4"}),s.email]}),s.phone&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(u,{className:"h-4 w-4"}),s.phone]}),s.company&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(j,{className:"h-4 w-4"}),s.company]})]})]}),e.jsx(a,{variant:"secondary",children:f(new Date(s.created_at),"MMM dd, yyyy")})]})}),e.jsx(o,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{children:e.jsxs("h4",{className:"font-medium text-sm flex items-center gap-1",children:[e.jsx(g,{className:"h-4 w-4"}),"Issue Type: ",s.issue_type]})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-sm",children:"Subject:"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.subject})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-sm",children:"Description:"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.description})]}),s.system_info&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-sm",children:"System Information:"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.system_info})]}),s.error_details&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-sm",children:"Error Details:"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.error_details})]})]})})]},s.id))})]})};export{P as default};
