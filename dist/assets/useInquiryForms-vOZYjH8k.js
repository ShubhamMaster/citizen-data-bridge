import{q as a,s as u,A as c}from"./index-COc_9EsS.js";import{u as m,a as l}from"./useEmailConfirmation-Dx1rH9dT.js";const p=()=>{a();const t=async r=>{try{const e=r.company||r.organization||r.name||"Unknown Company",{data:n,error:i}=await u.rpc("extract_and_store_company_data",{company_name:e,email:r.email||null,phone:r.phone||null,website:r.website||null,address:r.address||null,social_platform:null,social_url:null});return i?(console.error("Error capturing company data:",i),null):(console.log("Company data captured successfully:",n),n)}catch(e){return console.error("Error in captureCompanyData:",e),null}},o=r=>{const e=r.split("@")[1];return e?e.split(".")[0]:null};return{captureCompanyData:t,captureFromForm:async r=>{const e={name:r.name,email:r.email,phone:r.phone,company:r.company||r.organization,website:r.website,address:r.address};if(!e.company&&e.email){const n=o(e.email);n&&(e.company=n.charAt(0).toUpperCase()+n.slice(1))}return await t(e)},extractEmailDomain:o}},q=()=>{const{toast:t}=a(),o=c(),{captureFromForm:s}=p(),{sendConfirmationEmail:r}=m();return l({mutationFn:async e=>{await s(e);const n={name:e.name,email:e.email,company:e.company,project_idea:e.project_description,budget_range:e.budget_range,timeline:e.timeline,key_features:e.requirements,target_users:e.project_type},{error:i}=await u.from("saas_project_requests").insert([n]);if(i)throw i;await r({formType:"saas",...e})},onSuccess:()=>{t({title:"Project Inquiry Submitted!",description:"Thank you for your project inquiry. Our team will review it and get back to you soon."}),o.invalidateQueries({queryKey:["saas-project-requests"]})},onError:e=>{console.error("Error submitting project inquiry:",e),t({title:"Error",description:"There was an error submitting your project inquiry. Please try again.",variant:"destructive"})}})},d=()=>{const{toast:t}=a(),o=c(),{captureFromForm:s}=p(),{sendConfirmationEmail:r}=m();return l({mutationFn:async e=>{await s(e);const{error:n}=await u.from("investment_inquiries").insert([e]);if(n)throw n;await r({formType:"investment",...e})},onSuccess:()=>{t({title:"Investment Inquiry Submitted!",description:"Thank you for your investment inquiry. Our team will review it and contact you soon."}),o.invalidateQueries({queryKey:["investment-inquiries"]})},onError:e=>{console.error("Error submitting investment inquiry:",e),t({title:"Error",description:"There was an error submitting your investment inquiry. Please try again.",variant:"destructive"})}})};export{q as a,d as u};
