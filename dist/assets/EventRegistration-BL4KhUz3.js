import{a as E,z as w,q as S,r as n,j as e,B as m,s as f}from"./index-COc_9EsS.js";import{H as u,F as x}from"./Footer-CyJ0ouTo.js";import{U as k}from"./UniformHeroSection-DgU-VhiN.js";import{I as h}from"./input-CtDZ1l8n.js";import"./chevron-down-Q_a8tIzl.js";import"./mail-C1qg-MLr.js";import"./phone-BZMpqAbR.js";import"./map-pin-BhWPv-Lk.js";const B=()=>{const c=E(),{eventId:r}=w(),{toast:i}=S(),[v,g]=n.useState(!1),[t,j]=n.useState(null),[N,p]=n.useState(!0),[o,b]=n.useState({name:"",email:"",phone:""});n.useEffect(()=>{(async()=>{if(!r){p(!1);return}try{const{data:a,error:l}=await f.from("upcoming_events").select("*").eq("id",r).single();if(l)throw l;j(a)}catch(a){console.error("Error fetching event:",a),i({title:"Event Not Found",description:"The requested event could not be found.",variant:"destructive"})}finally{p(!1)}})()},[r,i]);const d=(s,a)=>{b(l=>({...l,[s]:a}))},y=async s=>{s.preventDefault(),g(!0);try{const{error:a}=await f.from("event_registrations").insert([{...o,event_id:r}]);if(a)throw a;i({title:"Registration Successful!",description:`You've been registered for ${t==null?void 0:t.title}. We'll send you event details via email.`}),b({name:"",email:"",phone:""}),setTimeout(()=>c("/innovation-lab"),2e3)}catch(a){console.error("Error submitting registration:",a),i({title:"Registration Error",description:"There was an error processing your registration. Please try again.",variant:"destructive"})}finally{g(!1)}};return N?e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(u,{}),e.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-accent"})}),e.jsx(x,{})]}):t?e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(u,{}),e.jsx(k,{title:`Register for ${t.title}`,subtitle:`Join us on ${new Date(t.date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})} for this exciting event.`,breadcrumb:"Innovation Lab / Events / Register"}),e.jsx("section",{className:"section-padding bg-background",children:e.jsx("div",{className:"container-custom",children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12",children:[e.jsx("div",{children:e.jsxs("div",{className:"card-modern overflow-hidden",children:[e.jsx("img",{src:t.image_url,alt:t.title,className:"w-full h-64 object-cover"}),e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-2xl font-bold text-primary mb-4",children:t.title}),e.jsx("div",{className:"flex items-center gap-2 text-accent mb-4",children:e.jsx("span",{className:"text-sm",children:new Date(t.date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})}),e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:t.description})]})]})}),e.jsx("div",{children:e.jsxs("div",{className:"card-modern p-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-3xl font-bold text-primary mb-4",children:"Event Registration"}),e.jsx("p",{className:"text-muted-foreground",children:"Fill out the form below to secure your spot at this event."})]}),e.jsxs("form",{onSubmit:y,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary mb-2",children:"Full Name *"}),e.jsx(h,{type:"text",value:o.name,onChange:s=>d("name",s.target.value),required:!0,placeholder:"Your full name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary mb-2",children:"Email Address *"}),e.jsx(h,{type:"email",value:o.email,onChange:s=>d("email",s.target.value),required:!0,placeholder:"your.email@example.com"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary mb-2",children:"Phone Number"}),e.jsx(h,{type:"tel",value:o.phone,onChange:s=>d("phone",s.target.value),placeholder:"+1 (555) 123-4567"})]}),e.jsxs("div",{className:"flex flex-col gap-4 pt-4",children:[e.jsx(m,{type:"submit",disabled:v,className:"btn-primary w-full",children:v?"Registering...":"Register for Event"}),e.jsx(m,{type:"button",variant:"outline",onClick:()=>c("/innovation-lab"),className:"btn-secondary w-full",children:"Back to Innovation Lab"})]})]})]})})]})})})}),e.jsx(x,{})]}):e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(u,{}),e.jsxs("div",{className:"container-custom py-20 text-center",children:[e.jsx("h1",{className:"text-4xl font-bold text-primary mb-4",children:"Event Not Found"}),e.jsx("p",{className:"text-muted-foreground mb-8",children:"The requested event could not be found."}),e.jsx(m,{onClick:()=>c("/innovation-lab"),className:"btn-primary",children:"Back to Innovation Lab"})]}),e.jsx(x,{})]})};export{B as default};
