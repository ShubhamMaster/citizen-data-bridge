import{q as H,r as n,s as l,j as e,C as $,x as G,B as _}from"./index-COc_9EsS.js";import{I as K}from"./input-CtDZ1l8n.js";import{T as Q,a as W,b as c,c as o}from"./tabs-1zC5oSz6.js";import{B as X}from"./badge-jxMiL_t9.js";import{D as Y,b as Z,c as ee,d as se}from"./dialog-DXrd4U38.js";import{S as te}from"./search-_tnmDF7W.js";import{U as ae}from"./user-DWxkVPiK.js";import{M as re}from"./mail-C1qg-MLr.js";import{P as ne}from"./phone-BZMpqAbR.js";import{B as le}from"./building-BwM0YiQ_.js";import{E as ie}from"./eye-BWg0lIGw.js";import{T as ce}from"./trash-2-CCkRIFkE.js";import{F as oe}from"./file-text-BWAGHgaU.js";const de=()=>{const{toast:x}=H(),[d,C]=n.useState(""),[q,T]=n.useState(null),[D,b]=n.useState(!1),[h,L]=n.useState([]),[p,R]=n.useState([]),[f,I]=n.useState([]),[j,E]=n.useState([]),[g,F]=n.useState([]),[N,B]=n.useState([]),[v,P]=n.useState([]),[y,k]=n.useState([]),[O,S]=n.useState(!0);n.useEffect(()=>{w()},[]);const w=async()=>{S(!0);try{const[s,r,a,m,u,A,J,U]=await Promise.all([l.from("contact_submissions").select("*").order("created_at",{ascending:!1}),l.from("investment_inquiries").select("*").order("created_at",{ascending:!1}),l.from("partners_inquiries").select("*").order("created_at",{ascending:!1}),l.from("technical_consultations").select("*").order("created_at",{ascending:!1}),l.from("support_tickets").select("*").order("created_at",{ascending:!1}),l.from("salary_inquiries").select("*").order("created_at",{ascending:!1}),l.from("collaboration_requests").select("*").order("created_at",{ascending:!1}),l.from("join_lab_forms").select("*").order("created_at",{ascending:!1})]);L(s.data||[]),R(r.data||[]),I(a.data||[]),E(m.data||[]),F(u.data||[]),B(A.data||[]),P(J.data||[]),k(U.data||[])}catch(s){console.error("Error fetching submissions:",s),x({title:"Error",description:"Failed to fetch form submissions",variant:"destructive"})}finally{S(!1)}},M=s=>{T(s),b(!0)},V=async(s,r)=>{if(confirm("Are you sure you want to delete this submission?"))try{const{error:a}=await l.from(r).delete().eq("id",s);if(a)throw a;x({title:"Success",description:"Submission deleted successfully"}),w()}catch(a){console.error("Error deleting submission:",a),x({title:"Error",description:"Failed to delete submission",variant:"destructive"})}},t=s=>d?s.filter(r=>{var a,m,u;return((a=r.name)==null?void 0:a.toLowerCase().includes(d.toLowerCase()))||((m=r.email)==null?void 0:m.toLowerCase().includes(d.toLowerCase()))||((u=r.company)==null?void 0:u.toLowerCase().includes(d.toLowerCase()))}):s,i=(s,r)=>e.jsx($,{className:"mb-4",children:e.jsxs(G,{className:"p-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ae,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"font-medium",children:s.name}),e.jsx(X,{variant:"outline",className:"text-xs",children:new Date(s.created_at).toLocaleDateString()})]}),e.jsxs("div",{className:"space-y-1 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(re,{className:"w-3 h-3"}),e.jsx("span",{children:s.email})]}),s.phone&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ne,{className:"w-3 h-3"}),e.jsx("span",{children:s.phone})]}),s.company&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(le,{className:"w-3 h-3"}),e.jsx("span",{children:s.company})]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(_,{variant:"outline",size:"sm",onClick:()=>M(s),children:e.jsx(ie,{className:"w-4 h-4"})}),e.jsx(_,{variant:"destructive",size:"sm",onClick:()=>V(s.id,r),children:e.jsx(ce,{className:"w-4 h-4"})})]})]}),s.message&&e.jsx("p",{className:"text-sm text-muted-foreground truncate",children:s.message.length>100?`${s.message.substring(0,100)}...`:s.message})]})},s.id),z=s=>s?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Name"}),e.jsx("p",{className:"mt-1",children:s.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Email"}),e.jsx("p",{className:"mt-1",children:s.email})]}),s.phone&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Phone"}),e.jsx("p",{className:"mt-1",children:s.phone})]}),s.company&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Company"}),e.jsx("p",{className:"mt-1",children:s.company})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Submitted At"}),e.jsx("p",{className:"mt-1",children:new Date(s.created_at).toLocaleString()})]})]}),Object.entries(s).map(([r,a])=>["id","created_at","name","email","phone","company"].includes(r)||a==null||a===""?null:e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground capitalize",children:r.replace(/_/g," ")}),e.jsx("p",{className:"mt-1 whitespace-pre-wrap",children:typeof a=="object"?JSON.stringify(a,null,2):String(a)})]},r))]}):null;return O?e.jsx("div",{className:"flex items-center justify-center p-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-2"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading submissions..."})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Form Submissions"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage all form submissions from your website"})]})}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("div",{className:"relative flex-1 max-w-sm",children:[e.jsx(te,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(K,{placeholder:"Search submissions...",className:"pl-10",value:d,onChange:s=>C(s.target.value)})]})}),e.jsxs(Q,{defaultValue:"contact",className:"space-y-4",children:[e.jsxs(W,{className:"grid w-full grid-cols-4 lg:grid-cols-8",children:[e.jsxs(c,{value:"contact",children:["Contact (",h.length,")"]}),e.jsxs(c,{value:"investment",children:["Investment (",p.length,")"]}),e.jsxs(c,{value:"partners",children:["Partners (",f.length,")"]}),e.jsxs(c,{value:"technical",children:["Technical (",j.length,")"]}),e.jsxs(c,{value:"support",children:["Support (",g.length,")"]}),e.jsxs(c,{value:"salary",children:["Salary (",N.length,")"]}),e.jsxs(c,{value:"collaboration",children:["R&D (",v.length,")"]}),e.jsxs(c,{value:"joinlab",children:["Join Lab (",y.length,")"]})]}),e.jsx(o,{value:"contact",children:e.jsxs("div",{className:"space-y-4",children:[t(h).map(s=>i(s,"contact_submissions")),t(h).length===0&&e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No contact submissions found"})]})}),e.jsx(o,{value:"investment",children:e.jsxs("div",{className:"space-y-4",children:[t(p).map(s=>i(s,"investment_inquiries")),t(p).length===0&&e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No investment inquiries found"})]})}),e.jsx(o,{value:"partners",children:e.jsxs("div",{className:"space-y-4",children:[t(f).map(s=>i(s,"partners_inquiries")),t(f).length===0&&e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No partner inquiries found"})]})}),e.jsx(o,{value:"technical",children:e.jsxs("div",{className:"space-y-4",children:[t(j).map(s=>i(s,"technical_consultations")),t(j).length===0&&e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No technical consultations found"})]})}),e.jsx(o,{value:"support",children:e.jsxs("div",{className:"space-y-4",children:[t(g).map(s=>i(s,"support_tickets")),t(g).length===0&&e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No support tickets found"})]})}),e.jsx(o,{value:"salary",children:e.jsxs("div",{className:"space-y-4",children:[t(N).map(s=>i(s,"salary_inquiries")),t(N).length===0&&e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No salary inquiries found"})]})}),e.jsx(o,{value:"collaboration",children:e.jsxs("div",{className:"space-y-4",children:[t(v).map(s=>i(s,"collaboration_requests")),t(v).length===0&&e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No collaboration requests found"})]})}),e.jsx(o,{value:"joinlab",children:e.jsxs("div",{className:"space-y-4",children:[t(y).map(s=>i(s,"join_lab_forms")),t(y).length===0&&e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No join lab forms found"})]})})]}),e.jsx(Y,{open:D,onOpenChange:b,children:e.jsxs(Z,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsx(ee,{children:e.jsx(se,{children:"Submission Details"})}),z(q)]})})]})},we=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(oe,{className:"h-8 w-8"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Form Submissions"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage all form submissions from your website"})]})]}),e.jsx(de,{})]});export{we as default};
