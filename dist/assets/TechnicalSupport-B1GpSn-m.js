import{q as g,A as C,s as v,r as T,j as e,C as F,v as _,w as E,y as N,x as w,B as I,b as P}from"./index-COc_9EsS.js";import{o as k,s as t,u as q,F as V,a as o,b as i,c as n,d as a,e as l,t as O}from"./form-BgAqJHVE.js";import{H as B,F as H}from"./Footer-CyJ0ouTo.js";import{U as L}from"./UniformHeroSection-DgU-VhiN.js";import{I as d}from"./input-CtDZ1l8n.js";import{T as h}from"./textarea-CqUjQhD9.js";import{S as j,a as y,b as f,c as b,d as c}from"./select-DRr0sP0p.js";import{u as R,a as D}from"./useEmailConfirmation-Dx1rH9dT.js";import{F as A}from"./SkeletonLoaders-CBT9IK7Y.js";import"./label-Dwl52tZZ.js";import"./chevron-down-Q_a8tIzl.js";import"./mail-C1qg-MLr.js";import"./phone-BZMpqAbR.js";import"./map-pin-BhWPv-Lk.js";import"./index-s0IQ3itP.js";import"./index-CUsEfDx6.js";import"./index-DUvJja7M.js";import"./chevron-up-DP1NMAhj.js";const M=()=>{const{toast:p}=g(),u=C(),{sendConfirmationEmail:m}=R();return D({mutationFn:async s=>{const{data:x,error:r}=await v.from("support_tickets").insert([{...s,priority:s.priority||"medium"}]).select().single();if(r)throw r;return await m({formType:"technical",...s}),x},onSuccess:()=>{p({title:"Support Ticket Created!",description:"Your technical support request has been submitted. We'll contact you soon."}),u.invalidateQueries({queryKey:["support-tickets"]})},onError:s=>{console.error("Error creating support ticket:",s),p({title:"Submission Error",description:"There was an error submitting your support request. Please try again.",variant:"destructive"})}})},Q=k({name:t().min(2,"Name must be at least 2 characters"),email:t().email("Please enter a valid email address"),phone:t().optional(),company:t().optional(),subject:t().min(5,"Subject must be at least 5 characters"),description:t().min(10,"Please provide more details about the issue"),issue_type:t().min(1,"Please select an issue type"),priority:t().min(1,"Please select a priority level"),system_info:t().optional(),error_details:t().optional()}),le=()=>{const[p,u]=T.useState(!1),m=M(),s=q({resolver:O(Q),defaultValues:{name:"",email:"",phone:"",company:"",subject:"",description:"",issue_type:"",priority:"",system_info:"",error_details:""}}),x=async r=>{u(!0);try{await m.mutateAsync({name:r.name,email:r.email,phone:r.phone,company:r.company,subject:r.subject,description:r.description,issue_type:r.issue_type,priority:r.priority,system_info:r.system_info,error_details:r.error_details}),s.reset()}catch(S){console.error("Submission failed:",S)}finally{u(!1)}};return e.jsxs("div",{className:"min-h-screen flex flex-col",children:[e.jsx(B,{}),e.jsxs("main",{className:"flex-1",children:[e.jsx(L,{title:"Technical Support",subtitle:"Get expert technical assistance for your projects and systems"}),e.jsx("div",{className:"container mx-auto px-4 py-16",children:e.jsx("div",{className:"max-w-2xl mx-auto",children:e.jsxs(F,{children:[e.jsxs(_,{children:[e.jsx(E,{children:"Submit Support Request"}),e.jsx(N,{children:"Describe your technical issue and our support team will assist you promptly."})]}),e.jsx(w,{children:p?e.jsx(A,{}):e.jsx(V,{...s,children:e.jsxs("form",{onSubmit:s.handleSubmit(x),className:"space-y-6",children:[e.jsx(o,{control:s.control,name:"name",render:({field:r})=>e.jsxs(i,{children:[e.jsx(n,{children:"Full Name"}),e.jsx(a,{children:e.jsx(d,{placeholder:"Enter your full name",...r})}),e.jsx(l,{})]})}),e.jsx(o,{control:s.control,name:"email",render:({field:r})=>e.jsxs(i,{children:[e.jsx(n,{children:"Email Address"}),e.jsx(a,{children:e.jsx(d,{type:"email",placeholder:"Enter your email",...r})}),e.jsx(l,{})]})}),e.jsx(o,{control:s.control,name:"phone",render:({field:r})=>e.jsxs(i,{children:[e.jsx(n,{children:"Phone Number (Optional)"}),e.jsx(a,{children:e.jsx(d,{placeholder:"Enter your phone number",...r})}),e.jsx(l,{})]})}),e.jsx(o,{control:s.control,name:"company",render:({field:r})=>e.jsxs(i,{children:[e.jsx(n,{children:"Company Name (Optional)"}),e.jsx(a,{children:e.jsx(d,{placeholder:"Enter your company name",...r})}),e.jsx(l,{})]})}),e.jsx(o,{control:s.control,name:"subject",render:({field:r})=>e.jsxs(i,{children:[e.jsx(n,{children:"Subject"}),e.jsx(a,{children:e.jsx(d,{placeholder:"Brief description of the issue",...r})}),e.jsx(l,{})]})}),e.jsx(o,{control:s.control,name:"issue_type",render:({field:r})=>e.jsxs(i,{children:[e.jsx(n,{children:"Issue Type"}),e.jsxs(j,{onValueChange:r.onChange,defaultValue:r.value,children:[e.jsx(a,{children:e.jsx(y,{children:e.jsx(f,{placeholder:"Select issue type"})})}),e.jsxs(b,{children:[e.jsx(c,{value:"bug",children:"Bug Report"}),e.jsx(c,{value:"feature",children:"Feature Request"}),e.jsx(c,{value:"technical",children:"Technical Question"}),e.jsx(c,{value:"integration",children:"Integration Issue"}),e.jsx(c,{value:"performance",children:"Performance Issue"}),e.jsx(c,{value:"other",children:"Other"})]})]}),e.jsx(l,{})]})}),e.jsx(o,{control:s.control,name:"priority",render:({field:r})=>e.jsxs(i,{children:[e.jsx(n,{children:"Priority Level"}),e.jsxs(j,{onValueChange:r.onChange,defaultValue:r.value,children:[e.jsx(a,{children:e.jsx(y,{children:e.jsx(f,{placeholder:"Select priority"})})}),e.jsxs(b,{children:[e.jsx(c,{value:"low",children:"Low"}),e.jsx(c,{value:"medium",children:"Medium"}),e.jsx(c,{value:"high",children:"High"}),e.jsx(c,{value:"critical",children:"Critical"})]})]}),e.jsx(l,{})]})}),e.jsx(o,{control:s.control,name:"description",render:({field:r})=>e.jsxs(i,{children:[e.jsx(n,{children:"Issue Description"}),e.jsx(a,{children:e.jsx(h,{placeholder:"Provide detailed description of the issue, steps to reproduce, and expected vs actual behavior...",className:"min-h-[120px]",...r})}),e.jsx(l,{})]})}),e.jsx(o,{control:s.control,name:"system_info",render:({field:r})=>e.jsxs(i,{children:[e.jsx(n,{children:"System Information (Optional)"}),e.jsx(a,{children:e.jsx(h,{placeholder:"Operating System, Browser, Version, etc...",className:"min-h-[80px]",...r})}),e.jsx(l,{})]})}),e.jsx(o,{control:s.control,name:"error_details",render:({field:r})=>e.jsxs(i,{children:[e.jsx(n,{children:"Error Details (Optional)"}),e.jsx(a,{children:e.jsx(h,{placeholder:"Error messages, stack traces, console logs...",className:"min-h-[80px]",...r})}),e.jsx(l,{})]})}),e.jsx(I,{type:"submit",className:"w-full",disabled:m.isPending,children:m.isPending?"Submitting...":"Submit Support Request"})]})})})]})})})]}),e.jsx(H,{}),e.jsx(P,{})]})};export{le as default};
