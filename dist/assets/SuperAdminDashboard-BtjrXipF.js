import{j as e,C as i,x as r,v as n,w as l,y as d,B as y,s as c}from"./index-COc_9EsS.js";import{B as v}from"./badge-jxMiL_t9.js";import{u as b}from"./useQuery-08ZbY9E2.js";import{U as o}from"./users-CStnP4Kw.js";import{B as w}from"./building-2-9KbUser1.js";import{F as x}from"./file-text-BWAGHgaU.js";import{M as h}from"./mail-C1qg-MLr.js";import{C as A}from"./circle-check-big-CT8teBUW.js";import{T as C}from"./triangle-alert-thb70v1D.js";import{A as u}from"./activity-CTQY0Fpa.js";const H=()=>{const{data:s,isLoading:j}=b({queryKey:["super-admin-stats"],queryFn:async()=>{const[{count:t},{count:a},{count:m},{count:N},{data:g}]=await Promise.all([c.from("profiles").select("*",{count:"exact"}),c.from("civora_nexus_companies").select("*",{count:"exact"}),c.from("contact_submissions").select("*",{count:"exact"}),c.from("email_history").select("*",{count:"exact"}),c.from("admin_logs").select("*").order("created_at",{ascending:!1}).limit(10)]);return{totalUsers:t||0,totalCompanies:a||0,totalSubmissions:m||0,totalEmails:N||0,recentActivity:g||[]}}}),f=[{title:"User Management",description:"Manage user accounts and permissions",icon:o,href:"/admin/users"},{title:"Form Submissions",description:"Review and manage form submissions",icon:x,href:"/admin/form-submissions"},{title:"Email History",description:"Track all system emails",icon:h,href:"/admin/email-history"},{title:"System Logs",description:"View admin activity logs",icon:u,href:"/admin/admin-logs"}],p=[{name:"Database",status:"healthy",value:"99.9%"},{name:"Email Service",status:"healthy",value:"98.5%"},{name:"Authentication",status:"healthy",value:"100%"},{name:"API Endpoints",status:"warning",value:"95.2%"}];return j?e.jsx("div",{className:"space-y-6",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[...Array(4)].map((t,a)=>e.jsx(i,{children:e.jsx(r,{className:"p-6",children:e.jsxs("div",{className:"animate-pulse space-y-4",children:[e.jsx("div",{className:"h-4 bg-muted rounded w-3/4"}),e.jsx("div",{className:"h-8 bg-muted rounded w-1/2"})]})})},a))})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Super Admin Dashboard"}),e.jsx("p",{className:"text-muted-foreground",children:"Complete system overview and administrative controls"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs(i,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(l,{className:"text-sm font-medium",children:"Total Users"}),e.jsx(o,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(r,{children:[e.jsx("div",{className:"text-2xl font-bold",children:s==null?void 0:s.totalUsers}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"+2.5% from last month"})]})]}),e.jsxs(i,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(l,{className:"text-sm font-medium",children:"Companies"}),e.jsx(w,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(r,{children:[e.jsx("div",{className:"text-2xl font-bold",children:s==null?void 0:s.totalCompanies}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"+8.1% from last month"})]})]}),e.jsxs(i,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(l,{className:"text-sm font-medium",children:"Form Submissions"}),e.jsx(x,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(r,{children:[e.jsx("div",{className:"text-2xl font-bold",children:s==null?void 0:s.totalSubmissions}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"+12.3% from last month"})]})]}),e.jsxs(i,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(l,{className:"text-sm font-medium",children:"Emails Sent"}),e.jsx(h,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(r,{children:[e.jsx("div",{className:"text-2xl font-bold",children:s==null?void 0:s.totalEmails}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"+5.7% from last month"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(i,{children:[e.jsxs(n,{children:[e.jsx(l,{children:"Quick Actions"}),e.jsx(d,{children:"Access frequently used admin functions"})]}),e.jsx(r,{className:"space-y-4",children:f.map((t,a)=>{const m=t.icon;return e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(m,{className:"h-8 w-8 text-primary"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:t.title}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t.description})]})]}),e.jsx(y,{variant:"outline",size:"sm",children:"Access"})]},a)})})]}),e.jsxs(i,{children:[e.jsxs(n,{children:[e.jsx(l,{children:"System Health"}),e.jsx(d,{children:"Current status of all system components"})]}),e.jsx(r,{className:"space-y-4",children:p.map((t,a)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[t.status==="healthy"?e.jsx(A,{className:"h-5 w-5 text-green-500"}):e.jsx(C,{className:"h-5 w-5 text-yellow-500"}),e.jsx("span",{className:"font-medium",children:t.name})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm font-mono",children:t.value}),e.jsx(v,{variant:t.status==="healthy"?"default":"secondary",children:t.status})]})]},a))})]})]}),e.jsxs(i,{children:[e.jsxs(n,{children:[e.jsxs(l,{className:"flex items-center gap-2",children:[e.jsx(u,{className:"h-5 w-5"}),"Recent Admin Activity"]}),e.jsx(d,{children:"Latest administrative actions and system events"})]}),e.jsx(r,{children:s!=null&&s.recentActivity&&s.recentActivity.length>0?e.jsx("div",{className:"space-y-4",children:s.recentActivity.map((t,a)=>e.jsxs("div",{className:"flex items-center justify-between py-2 border-b last:border-b-0",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:t.action}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t.table_name&&`on ${t.table_name}`})]}),e.jsx("div",{className:"text-right",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:new Date(t.created_at).toLocaleDateString()})})]},a))}):e.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No recent activity"})})]})]})};export{H as default};
